<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Buscador de margaritas</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="container mt-4">
      <h1 class="text-center">Buscador de Margaritas</h1>
      <input
        id="search"
        class="form-control mb-3"
        placeholder="Escribe el nombre del trago"
        required
      />
      <button
        disabled
        id="btnBuscar"
        class="btn btn-primary mb-4"
        onclick="buscar()"
      >
        Buscar
      </button>
      <div id="resultado" class="row g-3"></div>
    </div>

    <script>
      const input = document.getElementById("search");
      const btnBuscar = document.getElementById("btnBuscar");

      // Habilitar el botón solo si hay texto
      input.addEventListener("input", () => {
        btnBuscar.disabled = input.value.trim() === "";
      });

      async function buscar() {
        const nombre = document.getElementById("search").value;
        const margarita = await fetch(
          "https://www.thecocktaildb.com/api/json/v1/1/search.php?s=" + nombre
        );
        const resultado = await margarita.json();
        console.log(resultado);
        mostrar(resultado.drinks);
      }
      //mostrar los resultadso
      function mostrar(drinks) {
        var datos = false;
        const contenedor = document.getElementById("resultado");

        contenedor.innerHTML = "";

        if (!drinks || drinks.length === 0) {
          contenedor.innerHTML = `<p class="text-center text-danger">No hay datos para mostrar</p>`;
          return;
        }

        drinks.forEach((drink, index) => {
          const card = `
    <div class="col-md-4">
      <div class="card h-100 shadow">
        <img src="${drink.strDrinkThumb}" class="card-img-top" alt="${
            drink.strDrink
          }">
        <div class="card-body">
          <h5 class="card-title">${drink.strDrink}</h5>
          <p class="card-text"><strong>Categoría:</strong> ${
            drink.strCategory
          }</p>
          <p class="card-text"><strong>Vaso:</strong> ${drink.strGlass}</p>
        </div>
        <div class="accordion" id="accordion-${index}">
          <div class="accordion-item">
            <h2 class="accordion-header" id="heading-${index}">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapse-${index}"
                aria-expanded="false"
                aria-controls="collapse-${index}"
              >
                Detalles
              </button>
            </h2>
            <div
              id="collapse-${index}"
              class="accordion-collapse collapse"
              aria-labelledby="heading-${index}"
              data-bs-parent="#accordion-${index}"
            >
              <div class="accordion-body">
                <p>${
                  drink.strInstructionsES
                    ? drink.strInstructionsES
                    : drink.strInstructions
                }</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>`;
          contenedor.innerHTML += card;
        });
      }
    </script>
  </body>
</html>
